<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta http-equiv="X-UA-Compatible" content="ie=edge">
 <title>Document</title>

<!--<link rel="stylesheet" type="text/css" href="index.css">-->
<link rel="stylesheet" href="BisonWWF/css/style.css">

<script src="./node_modules/web3/dist/web3.min.js"></script>

</head>

    <header>
      <div id="cont">
        <ul id="bar">
           <li>
             <div class="elem logo">
               <img src="BisonWWF/img/logo.jpg" style="height:150px;"/>
             </div>
           </li>
           <li>
             <div class="elem"><a href="index.html">Bet</a></div>
           </li>
           <li>
             <div class="elem"><a href="BisonWWF/map.html">Map</a></div>
           </li>
           <li>
             <div class="elem"><a href="BisonWWF/about.html">About Bisons</a></div>
           </li>
           <li>
             <div class="elem"><a href="BisonWWF/news.html">News</a></div>
           </li>
        </ul>
      </div>
    </header>

  <body>
    <h1>Choose a Bison to bet on</h1>
    <table>
      <tr>
        <th>Bison1</th>
        <th>10 bets</th>
        <th><button type="button" name="Bet">Bet</button></th>
      </tr>
    </table>
  </body>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>

<script>
 if (typeof web3 !== 'undefined')
{
 web3 = new Web3(web3.currentProvider);
 }
else
{

 // Set localhost to ganache RPC server (7545 for Desktop, 8545 for ganache-cli)
//web3 = new Web3(new Web3.providers.HttpProvider("localhost:8545"));
web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/d37c99e1ac30449bb8242d4986c45ffa"));

// First: https://ropsten.infura.io/v3/e715adc02100465cae4672888c50d7af
// Second: https://ropsten.infura.io/v3/d37c99e1ac30449bb8242d4986c45ffa
// Third: https://ropsten.infura.io/v3/d37c99e1ac30449bb8242d4986c45ffa
 }

// Set account
web3.eth.defaultAccount = "0x931a0d1ba8f47eb81cfcea5159880f312155d9e9";
//web3.eth.defaultAccount = web3.eth.accounts[0]



// Bison Contract ABI
var BisonAbi = web3.eth.contract([
    {
        "constant": false,
        "inputs": [],
        "name": "clearAll",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "clearBetters",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "clearBisons",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [],
        "name": "electWinner",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_bisonName",
                "type": "bytes32"
            }
        ],
        "name": "placeBet",
        "outputs": [],
        "payable": true,
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_price",
                "type": "uint256"
            }
        ],
        "name": "setPrice",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "payable": true,
        "stateMutability": "payable",
        "type": "fallback"
    },
    {
        "inputs": [
            {
                "name": "_initialBisonNames",
                "type": "bytes32[]"
            },
            {
                "name": "_initialMaxDistances",
                "type": "uint256[]"
            }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "constructor"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_bisonNameList",
                "type": "bytes32[]"
            },
            {
                "name": "_maxDistances",
                "type": "uint256[]"
            }
        ],
        "name": "updateData",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getBisonData",
        "outputs": [
            {
                "name": "",
                "type": "uint256[]"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getBisonNames",
        "outputs": [
            {
                "name": "",
                "type": "bytes32[]"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "getPrice",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "_bisonName",
                "type": "bytes32"
            }
        ],
        "name": "totalBetsFor",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "totalBetsForAllBisons",
        "outputs": [
            {
                "name": "",
                "type": "uint256[]"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "totalPot",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    }
]);

// Set to deployed contract address. Usage:
// 	Bison.totalBetsFor("0x01")
// 	Bison.placBet("0x01")
var Bison = BisonAbi.at('0xfd39b75ea171d25efeed020a1b1e5270f510161c');
//var getData = Bison.placeBet.getData(function parameters);
//web3.eth.sendTransaction({to:"0xd02bdcc3b3c3f6fc85ef1ab1905aab863bbe447b", from:"0x931a0d1ba8f47eb81cfcea5159880f312155d9e9", data: getData, value: 1000});


var transactionObject_non = {from: web3.eth.accounts[0]};
var transactionObject = {from: web3.eth.accounts[0], value: 1000};


/* Eksempler
Bison.placeBet.sendTransaction("0x01", transactionObject, (error, result) => {console.log(result)});
Bison.totalPot.call(transactionObject_non, (error, result) => {console.log(result)});
*/


</script>
</html>
